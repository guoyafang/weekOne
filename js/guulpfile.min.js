var gulp=require("gulp"),webserver=require("gulp-webserver"),fs=require("fs"),qs=require("qs"),url=require("url"),htmlmin=require("gulp-htmlmin"),clean=require("gulp-clean-css"),uglify=require("gulp-uglify"),rename=require("gulp-rename"),datasString=fs.readFileSync("data.json").toString();gulp.task("mockserver",function(){gulp.src(".").pipe(webserver({port:"8080",middleware:function(e,r,i){r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("content-type","application/json;charset=utf-8"),r.end(datasString)}}))});var options={removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeEmptyAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyJS:!0,minifyCSS:!0};gulp.task("zlibhtml",function(){gulp.src(".").pipe(htmlmin(options)).pipe(rename("index.min.html")).pipe(gulp.dest("./html/"))}),gulp.task("zlibjs",function(){gulp.src("./gulpfile.js").pipe(uglify()).pipe(rename("guulpfile.min.js")).pipe(gulp.dest("./js/"))}),gulp.task("zlibcss",function(){var e=require("gulp-postcss"),r=require("autoprefixer");gulp.src("./*.css").pipe(e([r({browsers:["last 2 versions"]})])).pipe(clean()).pipe(rename("./style.min.css")).pipe(gulp.dest("./css/"))}),gulp.task("default",["mockserver","zlibhtml","zlibcss","zlibjs"]);